<div class="orders-container" *ngIf="!loading; else loadingSpinner">

  <h2>Your Orders</h2>

  <div *ngIf="orders.length === 0">
    <p>No orders found.</p>
  </div>

  <div *ngFor="let order of orders" class="order-card">

    <h3>Order ID: {{ order._id }}</h3>
    <p>Status: <strong>{{ order.status }}</strong></p>
    <p>Total Price: {{ order.totalPrice }} EGP</p>
    <p>Total Items: {{ order.totalItems }}</p>

    <h4>Items:</h4>
    <div *ngFor="let item of order.items" class="item">
      <p>{{ item.name }} - {{ item.color }} - {{ item.size }} x {{ item.quantity }}</p>
    </div>

    <!-- زرار الكنسل يظهر بس لو الحالة تسمح -->
    <button
      *ngIf="order.status === 'pending' || order.status === 'confirmed'"
      (click)="cancelOrder(order._id)"
      class="cancel-btn">
      Cancel Order
    </button>

    <p *ngIf="order.status !== 'pending' && order.status !== 'confirmed'" class="not-allowed">
      Cannot cancel this order at this stage.
    </p>

  </div>

</div>

<ng-template #loadingSpinner>
  <p>Loading Orders...</p>
</ng-template>
